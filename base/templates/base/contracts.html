{% extends "base/layout.html" %}
{% load custom_filters %}

{% block script %}
contracts.js
{% endblock %}

{% block main %}
    <div class="card-top">
        <h1>Umowy</h1>
    </div>
    <div class="card-content">        
        {% csrf_token %}
        <p class="purple-text clickable" id="add-contract-container-toggle">Nowa umowa</p>
        <div class="row" id="add-contract-container">
            <div class="column top">
                <div class="clients-list">
                    {% for site in sites %}
                    <label><input type="checkbox" value="{{ site.id }}"><span class="purple-text">{{ site.url }}</span> - {{ site.client.name }}</label>
                    {% empty %}
                        <p>Brak klientÃ³w</p>
                    {% endfor %}
                </div>
                
                
            </div>
            <div class="column">
                <p>WprowadÅº dane</p>
                <div class="row">
                    <div class="column">
                        <input placeholder="CzÄ™stotliwoÅ›Ä‡ pÅ‚atnoÅ›ci [msc]" class="small-input" type="number" id="payment-frequency" name="payment_frequency">
                        <input placeholder="Kwota na fakturze [pln]" class="small-input" type="number" id="value" name="value">
                        <input placeholder="Data pierwszej pÅ‚atnoÅ›ci" class="small-input" type="date" id="payment-date" name="payment_date">
                    </div>
                    <div class="column">
                        
                        <div class="categories-list">
                            {% for category in categories %}
                                <label><input type="checkbox" value="{{ category.0 }}">{{ category.1 }}</label>
                            {% empty %}
                                <p>Brak kategorii</p>
                            {% endfor %}
                        </div>
                    </div>
                    </div>
                    <button id="add-contract" class="button-purple">Dodaj umowÄ™</button>
                    <p id="add-contract-message"></p>
                
            </div>
        </div>
        
        <table>
            <thead>
                <tr>
                    <th width="20%">Strona</th>
                    <th width="20%">Kategoria</th>
                    <th width="20%">Data wystawienia FV</th>
                    <th width="10%">CzÄ™stotliwoÅ›Ä‡</th>
                    <th width="10%">Cena</th>
                    <th width="10%">Faktury</th>
                    <th width="5%">SzczegÃ³Å‚y</th>
                </tr>
            </thead>
            <tbody>
                {% for contract in contracts %}
                <tr>
                    <td>{{ contract.site }}</td>
                    <td>{{ contract.get_category_display }}</td>
                    <td>{{ contract.payment_date }}</td>
                    <td>{{ contract.payment_frequency }}</td>
                    <td>{{ contract.value }}</td>
                    <td>ez</td>
                    <td><a href="/contract/{{ contract.id }}/">ðŸ”—</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
